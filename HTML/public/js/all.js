angular.module("main",["ngAnimate","ngRoute"]).config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$locationProvider.html5Mode(!0),$routeProvider.when("/",{templateUrl:"partials/principal.html",controller:"principalController"}),$routeProvider.when("/cadastro",{templateUrl:"partials/cadastro.html",controller:"cadastroController"}),$routeProvider.otherwise({redirectTo:"/"})}]),angular.module("main").service("cadastroService",["$http","$rootScope","messageService",function($http,$rootScope,messageService){return{cadastro:function(data){$http.post("http://localhost:8080/api/contatos/",data).success((res=>{messageService.insereMensagem("Cadastro feito com sucesso")})).error((res=>{messageService.insereMensagem(`Cadastro falhou: ${res.conteudoResposta.mensagem}`)}))}}}]),angular.module("main").service("listagemService",["$http","$rootScope","messageService",function($http,$rootScope,messageService){return{listagem:function(){$http.get("http://localhost:8080/api/contatos",{method:"GET"}).success((resp=>{$rootScope.resp=resp,$rootScope.contatos=$rootScope.resp.conteudoResposta})).error((resp=>{messageService.insereMensagem("Ocorreu um erro na busca")}))}}}]),angular.module("main").service("messageService",["$rootScope","$timeout",function($rootScope,$timeout){this.insereMensagem=function(message){$rootScope.transition=!0,$rootScope.messageBox=`${message}`,$timeout((f=>{$rootScope.transition=!1,$rootScope.messageBox=""}),5e3)}}]),angular.module("main").controller("cadastroController",["$scope","$rootScope","$http","$timeout","$location","cadastroService",function($scope,$rootScope,$http,$timeout,$location,cadastroService){$rootScope.titulo="Adição de contatos",$scope.nome="",$scope.email="",$scope.num="",$scope.cadastrar=function(){$scope.data={nome:$scope.nome,email:$scope.email,numero:$scope.num},cadastroService.cadastro($scope.data)},$scope.inicio=function(){$location.path("/")}}]),angular.module("main").controller("indexController",["$scope","$rootScope","$http","$timeout",function($scope,$rootScope,$http,$timeout,listagemService){$rootScope.transition=!1,$rootScope.titulo="Lista de Contatos",$rootScope.messageBox=""}]),angular.module("main").controller("principalController",["$rootScope","listagemService",function($rootScope,listagemService){$rootScope.titulo="Lista de Contatos",listagemService.listagem()}]);